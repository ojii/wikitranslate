{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["const load = (() => {\n    let index = 0;\n    const timeout = 5000;\n\n    return (url) => new Promise((resolve, reject) => {\n        const callback = '__callback' + index++;\n        const timeoutID = window.setTimeout(() => {\n            reject(new Error('Request timeout.'));\n        }, timeout);\n\n        window[callback] = (response) => {\n            window.clearTimeout(timeoutID);\n            resolve(response);\n        };\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.src = `${url}${(url.indexOf('?') === -1 ? '?' : '&')}callback=${callback}`;\n        document.getElementsByTagName('head')[0].appendChild(script);\n    });\n})();\n\n\n(() => {\n    const search = document.getElementById('search'),\n        source = document.getElementById('source'),\n        target = document.getElementById('target'),\n        result = document.getElementById('result'),\n        form = document.getElementById('form'),\n        wikify = (s) => {\n            return s.split(' ').map((e, i) => {\n                if (i){\n                    return e.toLowerCase();\n                } else {\n                    return e[0].toUpperCase() + e.substr(1).toLowerCase();\n                }\n            }).join('_');\n        },\n        translate = () => {\n            const slang = encodeURIComponent(source.value),\n                tlang = encodeURIComponent(target.value),\n                term = encodeURIComponent(wikify(search.value));\n            result.textContent = '...';\n            load(`https://${slang}.wikipedia.org/w/api.php?action=query&titles=${term}&prop=langlinks&lllang=${tlang}&format=json&callback=processResult`).then((data) => {\n                const page = data.query.pages[Object.keys(data.query.pages)[0]];\n                history.pushState(data, document.title, `/?q=${search.value}&s=${slang}&t=${tlang}`);\n                if (page.langlinks && page.langlinks.length) {\n                    result.textContent = page.langlinks[0]['*'];\n                } else {\n                    result.textContent = '';\n                }\n            }).catch((reason) => {\n                result.textContent = `Error: ${reason}`;\n            });\n        };\n\n    let params = {};\n    let bits = location.search.substr(1).split('&');\n    for (var i = 0, l = bits.length; i < l; i++){\n        let arg = decodeURIComponent(bits[i]);\n        if (arg.indexOf('=') === -1){\n            params[arg.trim()] = true;\n        } else {\n            arg = arg.split('=');\n            params[arg[0].trim()] = arg[1].trim().split('_').join(' ');\n        }\n    }\n\n    search.value = params.q || '';\n    source.value = params.s || 'en';\n    target.value = params.t || 'ja';\n\n    form.addEventListener('submit', (e) => {\n        translate();\n        e.preventDefault();\n        return false;\n    });\n\n    if (search.value.length){\n        translate();\n    }\n})();\n"]}